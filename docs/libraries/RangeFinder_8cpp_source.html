<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>APM:Libraries: libraries/AP_RangeFinder/RangeFinder.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">APM:Libraries
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_bc0718b08fb2015b8e59c47b2805f60c.html">libraries</a></li><li class="navelem"><a class="el" href="dir_2db31eccffaa5186f16f2cc3bf0c362d.html">AP_RangeFinder</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">RangeFinder.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="RangeFinder_8cpp.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// -*- tab-width: 4; Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil -*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">   This program is free software: you can redistribute it and/or modify</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">   it under the terms of the GNU General Public License as published by</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">   the Free Software Foundation, either version 3 of the License, or</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">   (at your option) any later version.</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">   This program is distributed in the hope that it will be useful,</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">   but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">   GNU General Public License for more details.</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">   You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">   along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="RangeFinder_8h.html">RangeFinder.h</a>&quot;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__RangeFinder__analog_8h.html">AP_RangeFinder_analog.h</a>&quot;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__RangeFinder__PulsedLightLRF_8h.html">AP_RangeFinder_PulsedLightLRF.h</a>&quot;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__RangeFinder__MaxsonarI2CXL_8h.html">AP_RangeFinder_MaxsonarI2CXL.h</a>&quot;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__RangeFinder__PX4_8h.html">AP_RangeFinder_PX4.h</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="AP__RangeFinder__PX4__PWM_8h.html">AP_RangeFinder_PX4_PWM.h</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">// table of user settable parameters</span></div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="RangeFinder_8cpp.html#a141e29325b6a1a32c3cea09b87afa5cd">   25</a></span>&#160;<span class="keyword">const</span> <a class="code" href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a> <a class="code" href="classRangeFinder.html#aaf9ccdcab7f1d9815a97eb5cf5d2dfe8">RangeFinder::var_info</a>[] <a class="code" href="RangeFinder_8cpp.html#a141e29325b6a1a32c3cea09b87afa5cd">PROGMEM</a> = {</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    <span class="comment">// @Param: _TYPE</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    <span class="comment">// @DisplayName: Rangefinder type</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="comment">// @Description: What type of rangefinder device that is connected</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="comment">// @Values: 0:None,1:Analog,2:APM2-MaxbotixI2C,3:APM2-PulsedLightI2C,4:PX4-I2C,5:PX4-PWM</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_TYPE&quot;</span>,    0, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _type[0], 0),</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    <span class="comment">// @Param: _PIN</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    <span class="comment">// @DisplayName: Rangefinder pin</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;    <span class="comment">// @Description: Analog pin that rangefinder is connected to. Set this to 0..9 for the APM2 analog pins. Set to 64 on an APM1 for the dedicated &#39;airspeed&#39; port on the end of the board. Set to 11 on PX4 for the analog &#39;airspeed&#39; port. Set to 15 on the Pixhawk for the analog &#39;airspeed&#39; port.</span></div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">// @Values: -1:Not Used, 0:APM2-A0, 1:APM2-A1, 2:APM2-A2, 3:APM2-A3, 4:APM2-A4, 5:APM2-A5, 6:APM2-A6, 7:APM2-A7, 8:APM2-A8, 9:APM2-A9, 11:PX4-airspeed port, 15:Pixhawk-airspeed port, 64:APM1-airspeed port</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_PIN&quot;</span>,     1, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _pin[0], -1),</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="comment">// @Param: _SCALING</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// @DisplayName: Rangefinder scaling</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// @Description: Scaling factor between rangefinder reading and distance. For the linear and inverted functions this is in meters per volt. For the hyperbolic function the units are meterVolts.</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// @Units: meters/Volt</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// @Increment: 0.001</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_SCALING&quot;</span>, 2, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _scaling[0], 3.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// @Param: _OFFSET</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="comment">// @DisplayName: rangefinder offset</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// @Description: Offset in volts for zero distance for analog rangefinders. Offset added to distance in centimeters for PWM and I2C Lidars</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">// @Units: Volts</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="comment">// @Increment: 0.001</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_OFFSET&quot;</span>,  3, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _offset[0], 0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    <span class="comment">// @Param: _FUNCTION</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="comment">// @DisplayName: Rangefinder function</span></div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;    <span class="comment">// @Description: Control over what function is used to calculate distance. For a linear function, the distance is (voltage-offset)*scaling. For a inverted function the distance is (offset-voltage)*scaling. For a hyperbolic function the distance is scaling/(voltage-offset). The functions return the distance in meters.</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    <span class="comment">// @Values: 0:Linear,1:Inverted,2:Hyperbolic</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_FUNCTION&quot;</span>, 4, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _function[0], 0),</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="comment">// @Param: _MIN_CM</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;    <span class="comment">// @DisplayName: Rangefinder minimum distance</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;    <span class="comment">// @Description: Minimum distance in centimeters that rangefinder can reliably read</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;    <span class="comment">// @Units: centimeters</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_MIN_CM&quot;</span>,  5, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _min_distance_cm[0], 20),</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;    <span class="comment">// @Param: _MAX_CM</span></div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;    <span class="comment">// @DisplayName: Rangefinder maximum distance</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;    <span class="comment">// @Description: Maximum distance in centimeters that rangefinder can reliably read</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;    <span class="comment">// @Units: centimeters</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_MAX_CM&quot;</span>,  6, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _max_distance_cm[0], 700),</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;    <span class="comment">// @Param: _STOP_PIN</span></div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    <span class="comment">// @DisplayName: Rangefinder stop pin</span></div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;    <span class="comment">// @Description: Digital pin that enables/disables rangefinder measurement for an analog rangefinder. A value of -1 means no pin. If this is set, then the pin is set to 1 to enable the rangefinder and set to 0 to disable it. This can be used to ensure that multiple sonar rangefinders don&#39;t interfere with each other.</span></div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;    <span class="comment">// @Values: -1:Not Used,50:Pixhawk AUXOUT1,51:Pixhawk AUXOUT2,52:Pixhawk AUXOUT3,53:Pixhawk AUXOUT4,54:Pixhawk AUXOUT5,55:Pixhawk AUXOUT6,111:PX4 FMU Relay1,112:PX4 FMU Relay2,113:PX4IO Relay1,114:PX4IO Relay2,115:PX4IO ACC1,116:PX4IO ACC2</span></div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_STOP_PIN&quot;</span>, 7, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _stop_pin[0], -1),</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;    <span class="comment">// @Param: _SETTLE</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="comment">// @DisplayName: Rangefinder settle time</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;    <span class="comment">// @Description: The time in milliseconds that the rangefinder reading takes to settle. This is only used when a STOP_PIN is specified. It determines how long we have to wait for the rangefinder to give a reading after we set the STOP_PIN high. For a sonar rangefinder with a range of around 7m this would need to be around 50 milliseconds to allow for the sonar pulse to travel to the target and back again.</span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;    <span class="comment">// @Units: milliseconds</span></div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_SETTLE&quot;</span>, 8, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _settle_time_ms[0], 0),</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="comment">// @Param: _RMETRIC</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;    <span class="comment">// @DisplayName: Ratiometric</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;    <span class="comment">// @Description: This parameter sets whether an analog rangefinder is ratiometric. Most analog rangefinders are ratiometric, meaning that their output voltage is influenced by the supply voltage. Some analog rangefinders (such as the SF/02) have their own internal voltage regulators so they are not ratiometric.</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="comment">// @Values: 0:No,1:Yes</span></div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_RMETRIC&quot;</span>, 9, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _ratiometric[0], 1),</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;    <span class="comment">// @Param: RNGFND_PWRRNG</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="comment">// @DisplayName: Powersave range</span></div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;    <span class="comment">// @Description: This parameter sets the estimated terrain distance in meters above which the sensor will be put into a power saving mode (if available). A value of zero means power saving is not enabled</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;    <span class="comment">// @Units: meters</span></div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="comment">// @Range: 0 32767</span></div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_PWRRNG&quot;</span>, 10, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _powersave_range, 0),</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;    <span class="comment">// @Param: _GNDCLEAR</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="comment">// @DisplayName: Distance (in cm) from the range finder to the ground</span></div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;    <span class="comment">// @Description: This parameter sets the expected range measurement(in cm) that the range finder should return when the vehicle is on the ground.</span></div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <span class="comment">// @Units: centimeters</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="comment">// @Range: 0 127</span></div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;_GNDCLEAR&quot;</span>, 11, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _ground_clearance_cm[0], <a class="code" href="RangeFinder_8h.html#a16db648b425aa563e5a5884943894a4f">RANGEFINDER_GROUND_CLEARANCE_CM_DEFAULT</a>),</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;    <span class="comment">// 10..12 left for future expansion</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">#if RANGEFINDER_MAX_INSTANCES &gt; 1</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor"></span>    <span class="comment">// @Param: 2_TYPE</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="comment">// @DisplayName: Second Rangefinder type</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="comment">// @Description: What type of rangefinder device that is connected</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="comment">// @Values: 0:None,1:Analog,2:APM2-MaxbotixI2C,3:APM2-PulsedLightI2C,4:PX4-I2C,5:PX4-PWM</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_TYPE&quot;</span>,    12, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _type[1], 0),</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    <span class="comment">// @Param: 2_PIN</span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <span class="comment">// @DisplayName: Rangefinder pin</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;    <span class="comment">// @Description: Analog pin that rangefinder is connected to. Set this to 0..9 for the APM2 analog pins. Set to 64 on an APM1 for the dedicated &#39;airspeed&#39; port on the end of the board. Set to 11 on PX4 for the analog &#39;airspeed&#39; port. Set to 15 on the Pixhawk for the analog &#39;airspeed&#39; port.</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;    <span class="comment">// @Values: -1:Not Used, 0:APM2-A0, 1:APM2-A1, 2:APM2-A2, 3:APM2-A3, 4:APM2-A4, 5:APM2-A5, 6:APM2-A6, 7:APM2-A7, 8:APM2-A8, 9:APM2-A9, 11:PX4-airspeed port, 15:Pixhawk-airspeed port, 64:APM1-airspeed port</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_PIN&quot;</span>,     13, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _pin[1], -1),</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;    <span class="comment">// @Param: 2_SCALING</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="comment">// @DisplayName: Rangefinder scaling</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">// @Description: Scaling factor between rangefinder reading and distance. For the linear and inverted functions this is in meters per volt. For the hyperbolic function the units are meterVolts.</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    <span class="comment">// @Units: meters/Volt</span></div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">// @Increment: 0.001</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_SCALING&quot;</span>, 14, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _scaling[1], 3.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="comment">// @Param: 2_OFFSET</span></div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;    <span class="comment">// @DisplayName: rangefinder offset</span></div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;    <span class="comment">// @Description: Offset in volts for zero distance</span></div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <span class="comment">// @Units: Volts</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    <span class="comment">// @Increment: 0.001</span></div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_OFFSET&quot;</span>,  15, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _offset[1], 0.0<a class="code" href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a>),</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;    <span class="comment">// @Param: 2_FUNCTION</span></div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;    <span class="comment">// @DisplayName: Rangefinder function</span></div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;    <span class="comment">// @Description: Control over what function is used to calculate distance. For a linear function, the distance is (voltage-offset)*scaling. For a inverted function the distance is (offset-voltage)*scaling. For a hyperbolic function the distance is scaling/(voltage-offset). The functions return the distance in meters.</span></div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    <span class="comment">// @Values: 0:Linear,1:Inverted,2:Hyperbolic</span></div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_FUNCTION&quot;</span>,  16, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _function[1], 0),</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    <span class="comment">// @Param: 2_MIN_CM</span></div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    <span class="comment">// @DisplayName: Rangefinder minimum distance</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    <span class="comment">// @Description: Minimum distance in centimeters that rangefinder can reliably read</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    <span class="comment">// @Units: centimeters</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_MIN_CM&quot;</span>,  17, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _min_distance_cm[1], 20),</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    <span class="comment">// @Param: 2_MAX_CM</span></div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    <span class="comment">// @DisplayName: Rangefinder maximum distance</span></div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="comment">// @Description: Maximum distance in centimeters that rangefinder can reliably read</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;    <span class="comment">// @Units: centimeters</span></div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_MAX_CM&quot;</span>,  18, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _max_distance_cm[1], 700),</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <span class="comment">// @Param: 2_STOP_PIN</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="comment">// @DisplayName: Rangefinder stop pin</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    <span class="comment">// @Description: Digital pin that enables/disables rangefinder measurement for an analog rangefinder. A value of -1 means no pin. If this is set, then the pin is set to 1 to enable the rangefinder and set to 0 to disable it. This can be used to ensure that multiple sonar rangefinders don&#39;t interfere with each other.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;    <span class="comment">// @Values: -1:Not Used,50:Pixhawk AUXOUT1,51:Pixhawk AUXOUT2,52:Pixhawk AUXOUT3,53:Pixhawk AUXOUT4,54:Pixhawk AUXOUT5,55:Pixhawk AUXOUT6,111:PX4 FMU Relay1,112:PX4 FMU Relay2,113:PX4IO Relay1,114:PX4IO Relay2,115:PX4IO ACC1,116:PX4IO ACC2</span></div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_STOP_PIN&quot;</span>, 19, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _stop_pin[1], -1),</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="comment">// @Param: 2_SETTLE</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    <span class="comment">// @DisplayName: Sonar settle time</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <span class="comment">// @Description: The time in milliseconds that the rangefinder reading takes to settle. This is only used when a STOP_PIN is specified. It determines how long we have to wait for the rangefinder to give a reading after we set the STOP_PIN high. For a sonar rangefinder with a range of around 7m this would need to be around 50 milliseconds to allow for the sonar pulse to travel to the target and back again.</span></div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <span class="comment">// @Units: milliseconds</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_SETTLE&quot;</span>, 20, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _settle_time_ms[1], 0),</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    <span class="comment">// @Param: 2_RMETRIC</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <span class="comment">// @DisplayName: Ratiometric</span></div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// @Description: This parameter sets whether an analog rangefinder is ratiometric. Most analog rangefinders are ratiometric, meaning that their output voltage is influenced by the supply voltage. Some analog rangefinders (such as the SF/02) have their own internal voltage regulators so they are not ratiometric.</span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;    <span class="comment">// @Values: 0:No,1:Yes</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_RMETRIC&quot;</span>, 21, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _ratiometric[1], 1),</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;    <span class="comment">// @Param: 2_GNDCLEAR</span></div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    <span class="comment">// @DisplayName: Distance (in cm) from the second range finder to the ground</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;    <span class="comment">// @Description: This parameter sets the expected range measurement(in cm) that the second range finder should return when the vehicle is on the ground.</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    <span class="comment">// @Units: centimeters</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    <span class="comment">// @Range: 0 127</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    <span class="comment">// @Increment: 1</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="comment">// @User: Advanced</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    <a class="code" href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a>(<span class="stringliteral">&quot;2_GNDCLEAR&quot;</span>, 22, <a class="code" href="classRangeFinder.html">RangeFinder</a>, _ground_clearance_cm[1], <a class="code" href="RangeFinder_8h.html#a16db648b425aa563e5a5884943894a4f">RANGEFINDER_GROUND_CLEARANCE_CM_DEFAULT</a>),</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    <a class="code" href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;};</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="comment">  initialise the RangeFinder class. We do detection of attached range</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="comment">  finders here. For now we won&#39;t allow for hot-plugging of</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="comment">  rangefinders.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00193"></a><span class="lineno"><a class="line" href="classRangeFinder.html#a1c2d6a488e35a856814b5d48ca3d5d9e">  193</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRangeFinder.html#a1c2d6a488e35a856814b5d48ca3d5d9e">RangeFinder::init</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;{</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classRangeFinder.html#a4e5ec3bbf16864ebf0245ab35770f324">num_instances</a> != 0) {</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;        <span class="comment">// init called a 2nd time?</span></div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;    }</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="RangeFinder_8h.html#afff33622f1b34ddb499173e964284402">RANGEFINDER_MAX_INSTANCES</a>; <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <a class="code" href="classRangeFinder.html#a7f7f9dce880eb37d53df67cba39bdda9">detect_instance</a>(<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>] != NULL) {</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;            <span class="comment">// we loaded a driver for this instance, so it must be</span></div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;            <span class="comment">// present (although it may not be healthy)</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;            <a class="code" href="classRangeFinder.html#a4e5ec3bbf16864ebf0245ab35770f324">num_instances</a> = <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>+1;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;        }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        <span class="comment">// initialise pre-arm check variables</span></div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;        <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#ab889cfb1a3ee8403bae236c9f86f93e0">pre_arm_check</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a287c31bacab6a08966ca5d12b0c91281">pre_arm_distance_min</a> = 9999;  <span class="comment">// initialise to an arbitrary large value</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;        <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a0300939d4f819423760502f96d2c7bcd">pre_arm_distance_max</a> = 0;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        <span class="comment">// initialise status</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#aeea070b6ac0f4153f4b77bed5ad60d87">status</a> = <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2">RangeFinder_NotConnected</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;        <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a6a2bfd4d46b7e67f40ca87b4a0e50fa7">range_valid_count</a> = 0;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;}</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="comment">  update RangeFinder state for all instances. This should be called at</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="comment">  around 10Hz by main loop</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00221"></a><span class="lineno"><a class="line" href="classRangeFinder.html#a37112967f0252ed7c3fdc42f840761c7">  221</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRangeFinder.html#a37112967f0252ed7c3fdc42f840761c7">RangeFinder::update</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;{</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="classRangeFinder.html#a4e5ec3bbf16864ebf0245ab35770f324">num_instances</a>; <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>] != NULL) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;            <span class="keywordflow">if</span> (<a class="code" href="classRangeFinder.html#a0062ea39358ac436281a4d3ca05795f1">_type</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>] == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a61afcddffd6d12e62a59c5ba5712e359">RangeFinder_TYPE_NONE</a>) {</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;                <span class="comment">// allow user to disable a rangefinder at runtime</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#aeea070b6ac0f4153f4b77bed5ad60d87">status</a> = <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2">RangeFinder_NotConnected</a>;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a6a2bfd4d46b7e67f40ca87b4a0e50fa7">range_valid_count</a> = 0;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;            }</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;            <a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>]-&gt;<a class="code" href="classAP__RangeFinder__Backend.html#a48e0e33158f03ccc0147fbe8a7b5d970">update</a>();</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <a class="code" href="classRangeFinder.html#a9a31752438c769ed90299e3a31d01ca0">update_pre_arm_check</a>(<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;        }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// work out primary instance - first sensor returning good data</span></div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">for</span> (int8_t <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>=num_instances-1; <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>&gt;=0; <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>--) {</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>] != NULL &amp;&amp; (<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="classRangeFinder.html#a48a351902674ea1261e0cb7818bfd785">status</a> == <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda6a6a3d5d796bc66c713f11f2b633e1bb">RangeFinder_Good</a>)) {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;            <a class="code" href="classRangeFinder.html#a6dd90f0be36fbb987a903cf5168655b5">primary_instance</a> = <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    }</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;}</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;<span class="comment">  detect if an instance of a rangefinder is connected. </span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00247"></a><span class="lineno"><a class="line" href="classRangeFinder.html#a7f7f9dce880eb37d53df67cba39bdda9">  247</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRangeFinder.html#a7f7f9dce880eb37d53df67cba39bdda9">RangeFinder::detect_instance</a>(uint8_t instance)</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;{</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    uint8_t type = <a class="code" href="classRangeFinder.html#a0062ea39358ac436281a4d3ca05795f1">_type</a>[instance];</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_PX4 || CONFIG_HAL_BOARD == HAL_BOARD_VRBRAIN</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (type == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a98a538af4da10b61063ea0ff3fc3538c">RangeFinder_TYPE_PLI2C</a> || </div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;        type == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a646b0ac242fb78dbed82b67a1ed0d002">RangeFinder_TYPE_MBI2C</a>) {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;        <span class="comment">// I2C sensor types are handled by the PX4Firmware code</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;        type = <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a88cbe2c8b137a7824fe8b84e8d797a9c">RangeFinder_TYPE_PX4</a>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (type == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a98a538af4da10b61063ea0ff3fc3538c">RangeFinder_TYPE_PLI2C</a>) {</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__RangeFinder__PulsedLightLRF.html#a12f05561023eacee38730a22aeaef09c">AP_RangeFinder_PulsedLightLRF::detect</a>(*<span class="keyword">this</span>, instance)) {</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;            <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a3603268b4007fad542acf1d3769f5e7a">instance</a> = instance;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;            <a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[instance] = <span class="keyword">new</span> <a class="code" href="classAP__RangeFinder__PulsedLightLRF.html">AP_RangeFinder_PulsedLightLRF</a>(*<span class="keyword">this</span>, instance, <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance]);</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;        }</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    } </div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    <span class="keywordflow">if</span> (type == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a646b0ac242fb78dbed82b67a1ed0d002">RangeFinder_TYPE_MBI2C</a>) {</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__RangeFinder__MaxsonarI2CXL.html#a63b2fdab67041f94c16928e1764871b2">AP_RangeFinder_MaxsonarI2CXL::detect</a>(*<span class="keyword">this</span>, instance)) {</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;            <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a3603268b4007fad542acf1d3769f5e7a">instance</a> = instance;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;            <a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[instance] = <span class="keyword">new</span> <a class="code" href="classAP__RangeFinder__MaxsonarI2CXL.html">AP_RangeFinder_MaxsonarI2CXL</a>(*<span class="keyword">this</span>, instance, <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance]);</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        }</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_PX4  || CONFIG_HAL_BOARD == HAL_BOARD_VRBRAIN</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (type == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a88cbe2c8b137a7824fe8b84e8d797a9c">RangeFinder_TYPE_PX4</a>) {</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__RangeFinder__PX4.html#a5a3dda8e68d91d1c70177b6e903ab4de">AP_RangeFinder_PX4::detect</a>(*<span class="keyword">this</span>, instance)) {</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;            <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a3603268b4007fad542acf1d3769f5e7a">instance</a> = instance;</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            <a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[instance] = <span class="keyword">new</span> <a class="code" href="classAP__RangeFinder__PX4.html">AP_RangeFinder_PX4</a>(*<span class="keyword">this</span>, instance, <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance]);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        }</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    }</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    <span class="keywordflow">if</span> (type == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a94cb3010df5e91b0acc7aae868b19e3a">RangeFinder_TYPE_PX4_PWM</a>) {</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__RangeFinder__PX4__PWM.html#a55a5489f43240f0e64b7a1e01f964daa">AP_RangeFinder_PX4_PWM::detect</a>(*<span class="keyword">this</span>, instance)) {</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;            <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a3603268b4007fad542acf1d3769f5e7a">instance</a> = instance;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;            <a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[instance] = <span class="keyword">new</span> <a class="code" href="classAP__RangeFinder__PX4__PWM.html">AP_RangeFinder_PX4_PWM</a>(*<span class="keyword">this</span>, instance, <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance]);</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        }</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    }</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;<span class="preprocessor"></span>    <span class="keywordflow">if</span> (type == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a3e4ab2060465037ac9cacbbfb8e25aae">RangeFinder_TYPE_ANALOG</a>) {</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        <span class="comment">// note that analog must be the last to be checked, as it will</span></div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="comment">// always come back as present if the pin is valid</span></div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAP__RangeFinder__analog.html#a32053b2456e3c97ac33ef34577d5668f">AP_RangeFinder_analog::detect</a>(*<span class="keyword">this</span>, instance)) {</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;            <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a3603268b4007fad542acf1d3769f5e7a">instance</a> = instance;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;            <a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[instance] = <span class="keyword">new</span> <a class="code" href="classAP__RangeFinder__analog.html">AP_RangeFinder_analog</a>(*<span class="keyword">this</span>, instance, <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance]);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;            <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;        }</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    }</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;}</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;<span class="comment">// query status</span></div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="classRangeFinder.html#a5452cf4387ba889dd206b12375d2e059">  299</a></span>&#160;<a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8ed">RangeFinder::RangeFinder_Status</a> <a class="code" href="classRangeFinder.html#a48a351902674ea1261e0cb7818bfd785">RangeFinder::status</a>(uint8_t instance)<span class="keyword"> const</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    <span class="comment">// sanity check instance</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    <span class="keywordflow">if</span> (instance &gt; <a class="code" href="RangeFinder_8h.html#afff33622f1b34ddb499173e964284402">RANGEFINDER_MAX_INSTANCES</a>) {</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2">RangeFinder_NotConnected</a>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;    }</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[instance] == NULL || <a class="code" href="classRangeFinder.html#a0062ea39358ac436281a4d3ca05795f1">_type</a>[instance] == <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a61afcddffd6d12e62a59c5ba5712e359">RangeFinder_TYPE_NONE</a>) {</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2">RangeFinder_NotConnected</a>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#aeea070b6ac0f4153f4b77bed5ad60d87">status</a>;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;}</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;<span class="comment">// true if sensor is returning data</span></div>
<div class="line"><a name="l00314"></a><span class="lineno"><a class="line" href="classRangeFinder.html#a53a15c9f1ba0bfa9cbcf8d381025eb0f">  314</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classRangeFinder.html#aa50dfb619fb25279d55ac3206c34c5ca">RangeFinder::has_data</a>(uint8_t instance)<span class="keyword"> const</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    <span class="comment">// sanity check instance</span></div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="keywordflow">if</span> (instance &gt; <a class="code" href="RangeFinder_8h.html#afff33622f1b34ddb499173e964284402">RANGEFINDER_MAX_INSTANCES</a>) {</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2">RangeFinder_NotConnected</a>;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;    }</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    <span class="keywordflow">return</span> ((<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="classRangeFinder.html#a48a351902674ea1261e0cb7818bfd785">status</a> != <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2">RangeFinder_NotConnected</a>) &amp;&amp; (<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="classRangeFinder.html#a48a351902674ea1261e0cb7818bfd785">status</a> != <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda018b683070bd1a7ff45a9d6314af8716">RangeFinder_NoData</a>));</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;}</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="comment">  returns true if pre-arm checks have passed for all range finders</span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">  these checks involve the user lifting or rotating the vehicle so that sensor readings between</span></div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="comment">  the min and 2m can be captured</span></div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00328"></a><span class="lineno"><a class="line" href="classRangeFinder.html#adcd3c63e0d8d7760e364bfd7ee8cd047">  328</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="classRangeFinder.html#adcd3c63e0d8d7760e364bfd7ee8cd047">RangeFinder::pre_arm_check</a>()<span class="keyword"> const</span></div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="keyword"></span>{</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;<a class="code" href="classRangeFinder.html#a4e5ec3bbf16864ebf0245ab35770f324">num_instances</a>; <a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;        <span class="comment">// if driver is valid but pre_arm_check is false, return false</span></div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;        <span class="keywordflow">if</span> ((<a class="code" href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">drivers</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>] != NULL) &amp;&amp; (<a class="code" href="classRangeFinder.html#a0062ea39358ac436281a4d3ca05795f1">_type</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>] != <a class="code" href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a61afcddffd6d12e62a59c5ba5712e359">RangeFinder_TYPE_NONE</a>) &amp;&amp; !<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[<a class="code" href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>].<a class="code" href="classRangeFinder.html#adcd3c63e0d8d7760e364bfd7ee8cd047">pre_arm_check</a>) {</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;            <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        }</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    }</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;}</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;<span class="comment">  set pre-arm checks to passed if the range finder has been exercised through a reasonable range of movement</span></div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;<span class="comment">      max distance sensed is at least 50cm &gt; min distance sensed</span></div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;<span class="comment">      max distance &lt; 200cm</span></div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;<span class="comment">      min distance sensed is within 10cm of ground clearance or sensor&#39;s minimum distance</span></div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00345"></a><span class="lineno"><a class="line" href="classRangeFinder.html#a9a31752438c769ed90299e3a31d01ca0">  345</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="classRangeFinder.html#a9a31752438c769ed90299e3a31d01ca0">RangeFinder::update_pre_arm_check</a>(uint8_t instance)</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;{</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;    <span class="comment">// return immediately if already passed or no sensor data</span></div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="classRangeFinder.html#adcd3c63e0d8d7760e364bfd7ee8cd047">pre_arm_check</a> || <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="classRangeFinder.html#a48a351902674ea1261e0cb7818bfd785">status</a> == <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2">RangeFinder_NotConnected</a> || <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="classRangeFinder.html#a48a351902674ea1261e0cb7818bfd785">status</a> == <a class="code" href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda018b683070bd1a7ff45a9d6314af8716">RangeFinder_NoData</a>) {</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;        <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;    }</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// update min, max captured distances</span></div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a287c31bacab6a08966ca5d12b0c91281">pre_arm_distance_min</a> = <a class="code" href="AP__Math_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="classRangeFinder.html#ae793d6a44caf92c7f76f52d73182190f">distance_cm</a>, <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].pre_arm_distance_min);</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#a0300939d4f819423760502f96d2c7bcd">pre_arm_distance_max</a> = <a class="code" href="AP__Math_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].distance_cm, <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].pre_arm_distance_max);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="comment">// Check that the range finder has been exercised through a realistic range of movement</span></div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keywordflow">if</span> (((<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].pre_arm_distance_max - <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].pre_arm_distance_min) &gt; <a class="code" href="RangeFinder_8h.html#a225781d3b7d019b96ee0b3b520cfc43c">RANGEFINDER_PREARM_REQUIRED_CHANGE_CM</a>) &amp;&amp;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;         (<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].pre_arm_distance_max &lt; <a class="code" href="RangeFinder_8h.html#a498127d34919a8c1e058218186a837f2">RANGEFINDER_PREARM_ALT_MAX_CM</a>) &amp;&amp;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;         ((int16_t)<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].pre_arm_distance_min &lt; (<a class="code" href="AP__Math_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a>(<a class="code" href="classRangeFinder.html#ab12bab763ee87229dc1328c243cd6a02">_ground_clearance_cm</a>[instance],<a class="code" href="classRangeFinder.html#a6811aa65877c8990957519f6437e8e20">min_distance_cm</a>(instance)) + 10)) &amp;&amp;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;         ((int16_t)<a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].pre_arm_distance_min &gt; (<a class="code" href="AP__Math_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a>(<a class="code" href="classRangeFinder.html#ab12bab763ee87229dc1328c243cd6a02">_ground_clearance_cm</a>[instance],<a class="code" href="classRangeFinder.html#a6811aa65877c8990957519f6437e8e20">min_distance_cm</a>(instance)) - 10))) {</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;        <a class="code" href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">state</a>[instance].<a class="code" href="structRangeFinder_1_1RangeFinder__State.html#ab889cfb1a3ee8403bae236c9f86f93e0">pre_arm_check</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    }</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;}</div>
<div class="ttc" id="GCS__Console_2examples_2Console_2Console_8pde_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div><div class="ttdef"><b>Definition:</b> <a href="GCS__Console_2examples_2Console_2Console_8pde_source.html#l00061">Console.pde:61</a></div></div>
<div class="ttc" id="classRangeFinder_html_a6dd90f0be36fbb987a903cf5168655b5"><div class="ttname"><a href="classRangeFinder.html#a6dd90f0be36fbb987a903cf5168655b5">RangeFinder::primary_instance</a></div><div class="ttdeci">uint8_t primary_instance</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00184">RangeFinder.h:184</a></div></div>
<div class="ttc" id="structRangeFinder_1_1RangeFinder__State_html_a3603268b4007fad542acf1d3769f5e7a"><div class="ttname"><a href="structRangeFinder_1_1RangeFinder__State.html#a3603268b4007fad542acf1d3769f5e7a">RangeFinder::RangeFinder_State::instance</a></div><div class="ttdeci">uint8_t instance</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00071">RangeFinder.h:71</a></div></div>
<div class="ttc" id="classRangeFinder_html_aaf9ccdcab7f1d9815a97eb5cf5d2dfe8"><div class="ttname"><a href="classRangeFinder.html#aaf9ccdcab7f1d9815a97eb5cf5d2dfe8">RangeFinder::var_info</a></div><div class="ttdeci">static const struct AP_Param::GroupInfo var_info[]</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00096">RangeFinder.h:96</a></div></div>
<div class="ttc" id="classAP__RangeFinder__PulsedLightLRF_html_a12f05561023eacee38730a22aeaef09c"><div class="ttname"><a href="classAP__RangeFinder__PulsedLightLRF.html#a12f05561023eacee38730a22aeaef09c">AP_RangeFinder_PulsedLightLRF::detect</a></div><div class="ttdeci">static bool detect(RangeFinder &amp;ranger, uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__PulsedLightLRF_8cpp_source.html#l00037">AP_RangeFinder_PulsedLightLRF.cpp:37</a></div></div>
<div class="ttc" id="classRangeFinder_html_adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2"><div class="ttname"><a href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda7118bd858fb6cd99f52a44e5c12746c2">RangeFinder::RangeFinder_NotConnected</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00062">RangeFinder.h:62</a></div></div>
<div class="ttc" id="classRangeFinder_html_a48a351902674ea1261e0cb7818bfd785"><div class="ttname"><a href="classRangeFinder.html#a48a351902674ea1261e0cb7818bfd785">RangeFinder::status</a></div><div class="ttdeci">RangeFinder_Status status(void) const </div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00148">RangeFinder.h:148</a></div></div>
<div class="ttc" id="classRangeFinder_html_a62528af4f78867dc5a2b8eb3d79e8f5d"><div class="ttname"><a href="classRangeFinder.html#a62528af4f78867dc5a2b8eb3d79e8f5d">RangeFinder::state</a></div><div class="ttdeci">RangeFinder_State state[RANGEFINDER_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00182">RangeFinder.h:182</a></div></div>
<div class="ttc" id="classRangeFinder_html_a2ab9431cf7a1703be8b9b02fa5d5c182a88cbe2c8b137a7824fe8b84e8d797a9c"><div class="ttname"><a href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a88cbe2c8b137a7824fe8b84e8d797a9c">RangeFinder::RangeFinder_TYPE_PX4</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00051">RangeFinder.h:51</a></div></div>
<div class="ttc" id="RangeFinder_8h_html_a498127d34919a8c1e058218186a837f2"><div class="ttname"><a href="RangeFinder_8h.html#a498127d34919a8c1e058218186a837f2">RANGEFINDER_PREARM_ALT_MAX_CM</a></div><div class="ttdeci">#define RANGEFINDER_PREARM_ALT_MAX_CM</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00028">RangeFinder.h:28</a></div></div>
<div class="ttc" id="classRangeFinder_html_a37112967f0252ed7c3fdc42f840761c7"><div class="ttname"><a href="classRangeFinder.html#a37112967f0252ed7c3fdc42f840761c7">RangeFinder::update</a></div><div class="ttdeci">void update(void)</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00221">RangeFinder.cpp:221</a></div></div>
<div class="ttc" id="classRangeFinder_html_ab12bab763ee87229dc1328c243cd6a02"><div class="ttname"><a href="classRangeFinder.html#ab12bab763ee87229dc1328c243cd6a02">RangeFinder::_ground_clearance_cm</a></div><div class="ttdeci">AP_Int8 _ground_clearance_cm[RANGEFINDER_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00093">RangeFinder.h:93</a></div></div>
<div class="ttc" id="classAP__RangeFinder__MaxsonarI2CXL_html"><div class="ttname"><a href="classAP__RangeFinder__MaxsonarI2CXL.html">AP_RangeFinder_MaxsonarI2CXL</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__MaxsonarI2CXL_8h_source.html#l00018">AP_RangeFinder_MaxsonarI2CXL.h:18</a></div></div>
<div class="ttc" id="AP__Param_8h_html_abe1c2a65ce5455bf37f3c000b4241c00"><div class="ttname"><a href="AP__Param_8h.html#abe1c2a65ce5455bf37f3c000b4241c00">AP_GROUPINFO</a></div><div class="ttdeci">#define AP_GROUPINFO(name, idx, class, element, def)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00046">AP_Param.h:46</a></div></div>
<div class="ttc" id="RangeFinder_8h_html_afff33622f1b34ddb499173e964284402"><div class="ttname"><a href="RangeFinder_8h.html#afff33622f1b34ddb499173e964284402">RANGEFINDER_MAX_INSTANCES</a></div><div class="ttdeci">#define RANGEFINDER_MAX_INSTANCES</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00026">RangeFinder.h:26</a></div></div>
<div class="ttc" id="classRangeFinder_html_a2ab9431cf7a1703be8b9b02fa5d5c182a98a538af4da10b61063ea0ff3fc3538c"><div class="ttname"><a href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a98a538af4da10b61063ea0ff3fc3538c">RangeFinder::RangeFinder_TYPE_PLI2C</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00050">RangeFinder.h:50</a></div></div>
<div class="ttc" id="classRangeFinder_html_adcd3c63e0d8d7760e364bfd7ee8cd047"><div class="ttname"><a href="classRangeFinder.html#adcd3c63e0d8d7760e364bfd7ee8cd047">RangeFinder::pre_arm_check</a></div><div class="ttdeci">bool pre_arm_check() const </div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00328">RangeFinder.cpp:328</a></div></div>
<div class="ttc" id="RangeFinder_8cpp_html_a141e29325b6a1a32c3cea09b87afa5cd"><div class="ttname"><a href="RangeFinder_8cpp.html#a141e29325b6a1a32c3cea09b87afa5cd">PROGMEM</a></div><div class="ttdeci">const AP_Param::GroupInfo RangeFinder::var_info[] PROGMEM</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00025">RangeFinder.cpp:25</a></div></div>
<div class="ttc" id="structRangeFinder_1_1RangeFinder__State_html_ab889cfb1a3ee8403bae236c9f86f93e0"><div class="ttname"><a href="structRangeFinder_1_1RangeFinder__State.html#ab889cfb1a3ee8403bae236c9f86f93e0">RangeFinder::RangeFinder_State::pre_arm_check</a></div><div class="ttdeci">bool pre_arm_check</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00077">RangeFinder.h:77</a></div></div>
<div class="ttc" id="classRangeFinder_html_a2ab9431cf7a1703be8b9b02fa5d5c182a61afcddffd6d12e62a59c5ba5712e359"><div class="ttname"><a href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a61afcddffd6d12e62a59c5ba5712e359">RangeFinder::RangeFinder_TYPE_NONE</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00047">RangeFinder.h:47</a></div></div>
<div class="ttc" id="classRangeFinder_html_adea3c02123a4fbad18d7510c4718d8eda018b683070bd1a7ff45a9d6314af8716"><div class="ttname"><a href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda018b683070bd1a7ff45a9d6314af8716">RangeFinder::RangeFinder_NoData</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00063">RangeFinder.h:63</a></div></div>
<div class="ttc" id="classRangeFinder_html_ae793d6a44caf92c7f76f52d73182190f"><div class="ttname"><a href="classRangeFinder.html#ae793d6a44caf92c7f76f52d73182190f">RangeFinder::distance_cm</a></div><div class="ttdeci">uint16_t distance_cm() const </div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00115">RangeFinder.h:115</a></div></div>
<div class="ttc" id="RangeFinder_8h_html_a225781d3b7d019b96ee0b3b520cfc43c"><div class="ttname"><a href="RangeFinder_8h.html#a225781d3b7d019b96ee0b3b520cfc43c">RANGEFINDER_PREARM_REQUIRED_CHANGE_CM</a></div><div class="ttdeci">#define RANGEFINDER_PREARM_REQUIRED_CHANGE_CM</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00029">RangeFinder.h:29</a></div></div>
<div class="ttc" id="classRangeFinder_html_a6811aa65877c8990957519f6437e8e20"><div class="ttname"><a href="classRangeFinder.html#a6811aa65877c8990957519f6437e8e20">RangeFinder::min_distance_cm</a></div><div class="ttdeci">int16_t min_distance_cm() const </div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00136">RangeFinder.h:136</a></div></div>
<div class="ttc" id="AP__RangeFinder__PX4_8h_html"><div class="ttname"><a href="AP__RangeFinder__PX4_8h.html">AP_RangeFinder_PX4.h</a></div></div>
<div class="ttc" id="classRangeFinder_html_a9a31752438c769ed90299e3a31d01ca0"><div class="ttname"><a href="classRangeFinder.html#a9a31752438c769ed90299e3a31d01ca0">RangeFinder::update_pre_arm_check</a></div><div class="ttdeci">void update_pre_arm_check(uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00345">RangeFinder.cpp:345</a></div></div>
<div class="ttc" id="classAP__RangeFinder__PX4_html_a5a3dda8e68d91d1c70177b6e903ab4de"><div class="ttname"><a href="classAP__RangeFinder__PX4.html#a5a3dda8e68d91d1c70177b6e903ab4de">AP_RangeFinder_PX4::detect</a></div><div class="ttdeci">static bool detect(RangeFinder &amp;ranger, uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__PX4_8cpp_source.html#l00092">AP_RangeFinder_PX4.cpp:92</a></div></div>
<div class="ttc" id="classRangeFinder_html_adea3c02123a4fbad18d7510c4718d8eda6a6a3d5d796bc66c713f11f2b633e1bb"><div class="ttname"><a href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8eda6a6a3d5d796bc66c713f11f2b633e1bb">RangeFinder::RangeFinder_Good</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00066">RangeFinder.h:66</a></div></div>
<div class="ttc" id="classRangeFinder_html_a0062ea39358ac436281a4d3ca05795f1"><div class="ttname"><a href="classRangeFinder.html#a0062ea39358ac436281a4d3ca05795f1">RangeFinder::_type</a></div><div class="ttdeci">AP_Int8 _type[RANGEFINDER_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00083">RangeFinder.h:83</a></div></div>
<div class="ttc" id="AP__RangeFinder__PulsedLightLRF_8h_html"><div class="ttname"><a href="AP__RangeFinder__PulsedLightLRF_8h.html">AP_RangeFinder_PulsedLightLRF.h</a></div></div>
<div class="ttc" id="AP__Math_8h_html_ac6afabdc09a49a433ee19d8a9486056d"><div class="ttname"><a href="AP__Math_8h.html#ac6afabdc09a49a433ee19d8a9486056d">min</a></div><div class="ttdeci">#define min(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00194">AP_Math.h:194</a></div></div>
<div class="ttc" id="structRangeFinder_1_1RangeFinder__State_html_aeea070b6ac0f4153f4b77bed5ad60d87"><div class="ttname"><a href="structRangeFinder_1_1RangeFinder__State.html#aeea070b6ac0f4153f4b77bed5ad60d87">RangeFinder::RangeFinder_State::status</a></div><div class="ttdeci">enum RangeFinder_Status status</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00075">RangeFinder.h:75</a></div></div>
<div class="ttc" id="AP__Math_8h_html_affe776513b24d84b39af8ab0930fef7f"><div class="ttname"><a href="AP__Math_8h.html#affe776513b24d84b39af8ab0930fef7f">max</a></div><div class="ttdeci">#define max(a, b)</div><div class="ttdef"><b>Definition:</b> <a href="AP__Math_8h_source.html#l00193">AP_Math.h:193</a></div></div>
<div class="ttc" id="classRangeFinder_html_a4e5ec3bbf16864ebf0245ab35770f324"><div class="ttname"><a href="classRangeFinder.html#a4e5ec3bbf16864ebf0245ab35770f324">RangeFinder::num_instances</a></div><div class="ttdeci">uint8_t num_instances</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00185">RangeFinder.h:185</a></div></div>
<div class="ttc" id="DerivativeFilter_8cpp_html_a357394e0f6f88c8a57bd893ab28dc8f8"><div class="ttname"><a href="DerivativeFilter_8cpp.html#a357394e0f6f88c8a57bd893ab28dc8f8">f</a></div><div class="ttdeci">#define f(i)</div></div>
<div class="ttc" id="classAP__RangeFinder__Backend_html_a48e0e33158f03ccc0147fbe8a7b5d970"><div class="ttname"><a href="classAP__RangeFinder__Backend.html#a48e0e33158f03ccc0147fbe8a7b5d970">AP_RangeFinder_Backend::update</a></div><div class="ttdeci">virtual void update()=0</div></div>
<div class="ttc" id="structAP__Param_1_1GroupInfo_html"><div class="ttname"><a href="structAP__Param_1_1GroupInfo.html">AP_Param::GroupInfo</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00078">AP_Param.h:78</a></div></div>
<div class="ttc" id="classAP__RangeFinder__analog_html"><div class="ttname"><a href="classAP__RangeFinder__analog.html">AP_RangeFinder_analog</a></div><div class="ttdoc">-*- tab-width: 4; Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil -*- </div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__analog_8h_source.html#l00009">AP_RangeFinder_analog.h:9</a></div></div>
<div class="ttc" id="AP__RangeFinder__PX4__PWM_8h_html"><div class="ttname"><a href="AP__RangeFinder__PX4__PWM_8h.html">AP_RangeFinder_PX4_PWM.h</a></div></div>
<div class="ttc" id="classAP__RangeFinder__PX4_html"><div class="ttname"><a href="classAP__RangeFinder__PX4.html">AP_RangeFinder_PX4</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__PX4_8h_source.html#l00023">AP_RangeFinder_PX4.h:23</a></div></div>
<div class="ttc" id="classAP__RangeFinder__PX4__PWM_html_a55a5489f43240f0e64b7a1e01f964daa"><div class="ttname"><a href="classAP__RangeFinder__PX4__PWM.html#a55a5489f43240f0e64b7a1e01f964daa">AP_RangeFinder_PX4_PWM::detect</a></div><div class="ttdeci">static bool detect(RangeFinder &amp;ranger, uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__PX4__PWM_8cpp_source.html#l00082">AP_RangeFinder_PX4_PWM.cpp:82</a></div></div>
<div class="ttc" id="structRangeFinder_1_1RangeFinder__State_html_a0300939d4f819423760502f96d2c7bcd"><div class="ttname"><a href="structRangeFinder_1_1RangeFinder__State.html#a0300939d4f819423760502f96d2c7bcd">RangeFinder::RangeFinder_State::pre_arm_distance_max</a></div><div class="ttdeci">uint16_t pre_arm_distance_max</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00079">RangeFinder.h:79</a></div></div>
<div class="ttc" id="classRangeFinder_html_a97fc75cf9202d946347b64688c94d522"><div class="ttname"><a href="classRangeFinder.html#a97fc75cf9202d946347b64688c94d522">RangeFinder::drivers</a></div><div class="ttdeci">AP_RangeFinder_Backend * drivers[RANGEFINDER_MAX_INSTANCES]</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00183">RangeFinder.h:183</a></div></div>
<div class="ttc" id="RangeFinder_8h_html_a16db648b425aa563e5a5884943894a4f"><div class="ttname"><a href="RangeFinder_8h.html#a16db648b425aa563e5a5884943894a4f">RANGEFINDER_GROUND_CLEARANCE_CM_DEFAULT</a></div><div class="ttdeci">#define RANGEFINDER_GROUND_CLEARANCE_CM_DEFAULT</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00027">RangeFinder.h:27</a></div></div>
<div class="ttc" id="classRangeFinder_html_a2ab9431cf7a1703be8b9b02fa5d5c182a646b0ac242fb78dbed82b67a1ed0d002"><div class="ttname"><a href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a646b0ac242fb78dbed82b67a1ed0d002">RangeFinder::RangeFinder_TYPE_MBI2C</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00049">RangeFinder.h:49</a></div></div>
<div class="ttc" id="classAP__RangeFinder__analog_html_a32053b2456e3c97ac33ef34577d5668f"><div class="ttname"><a href="classAP__RangeFinder__analog.html#a32053b2456e3c97ac33ef34577d5668f">AP_RangeFinder_analog::detect</a></div><div class="ttdeci">static bool detect(RangeFinder &amp;ranger, uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__analog_8cpp_source.html#l00054">AP_RangeFinder_analog.cpp:54</a></div></div>
<div class="ttc" id="structRangeFinder_1_1RangeFinder__State_html_a6a2bfd4d46b7e67f40ca87b4a0e50fa7"><div class="ttname"><a href="structRangeFinder_1_1RangeFinder__State.html#a6a2bfd4d46b7e67f40ca87b4a0e50fa7">RangeFinder::RangeFinder_State::range_valid_count</a></div><div class="ttdeci">uint8_t range_valid_count</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00076">RangeFinder.h:76</a></div></div>
<div class="ttc" id="classRangeFinder_html"><div class="ttname"><a href="classRangeFinder.html">RangeFinder</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00033">RangeFinder.h:33</a></div></div>
<div class="ttc" id="RangeFinder_8h_html"><div class="ttname"><a href="RangeFinder_8h.html">RangeFinder.h</a></div></div>
<div class="ttc" id="AP__RangeFinder__MaxsonarI2CXL_8h_html"><div class="ttname"><a href="AP__RangeFinder__MaxsonarI2CXL_8h.html">AP_RangeFinder_MaxsonarI2CXL.h</a></div></div>
<div class="ttc" id="classAP__RangeFinder__MaxsonarI2CXL_html_a63b2fdab67041f94c16928e1764871b2"><div class="ttname"><a href="classAP__RangeFinder__MaxsonarI2CXL.html#a63b2fdab67041f94c16928e1764871b2">AP_RangeFinder_MaxsonarI2CXL::detect</a></div><div class="ttdeci">static bool detect(RangeFinder &amp;ranger, uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__MaxsonarI2CXL_8cpp_source.html#l00046">AP_RangeFinder_MaxsonarI2CXL.cpp:46</a></div></div>
<div class="ttc" id="classRangeFinder_html_a7f7f9dce880eb37d53df67cba39bdda9"><div class="ttname"><a href="classRangeFinder.html#a7f7f9dce880eb37d53df67cba39bdda9">RangeFinder::detect_instance</a></div><div class="ttdeci">void detect_instance(uint8_t instance)</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00247">RangeFinder.cpp:247</a></div></div>
<div class="ttc" id="classRangeFinder_html_a2ab9431cf7a1703be8b9b02fa5d5c182a94cb3010df5e91b0acc7aae868b19e3a"><div class="ttname"><a href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a94cb3010df5e91b0acc7aae868b19e3a">RangeFinder::RangeFinder_TYPE_PX4_PWM</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00052">RangeFinder.h:52</a></div></div>
<div class="ttc" id="classRangeFinder_html_adea3c02123a4fbad18d7510c4718d8ed"><div class="ttname"><a href="classRangeFinder.html#adea3c02123a4fbad18d7510c4718d8ed">RangeFinder::RangeFinder_Status</a></div><div class="ttdeci">RangeFinder_Status</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00061">RangeFinder.h:61</a></div></div>
<div class="ttc" id="AP__RangeFinder__analog_8h_html"><div class="ttname"><a href="AP__RangeFinder__analog_8h.html">AP_RangeFinder_analog.h</a></div></div>
<div class="ttc" id="classRangeFinder_html_a1c2d6a488e35a856814b5d48ca3d5d9e"><div class="ttname"><a href="classRangeFinder.html#a1c2d6a488e35a856814b5d48ca3d5d9e">RangeFinder::init</a></div><div class="ttdeci">void init(void)</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8cpp_source.html#l00193">RangeFinder.cpp:193</a></div></div>
<div class="ttc" id="classRangeFinder_html_aa50dfb619fb25279d55ac3206c34c5ca"><div class="ttname"><a href="classRangeFinder.html#aa50dfb619fb25279d55ac3206c34c5ca">RangeFinder::has_data</a></div><div class="ttdeci">bool has_data() const </div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00154">RangeFinder.h:154</a></div></div>
<div class="ttc" id="classRangeFinder_html_a2ab9431cf7a1703be8b9b02fa5d5c182a3e4ab2060465037ac9cacbbfb8e25aae"><div class="ttname"><a href="classRangeFinder.html#a2ab9431cf7a1703be8b9b02fa5d5c182a3e4ab2060465037ac9cacbbfb8e25aae">RangeFinder::RangeFinder_TYPE_ANALOG</a></div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00048">RangeFinder.h:48</a></div></div>
<div class="ttc" id="classAP__RangeFinder__PulsedLightLRF_html"><div class="ttname"><a href="classAP__RangeFinder__PulsedLightLRF.html">AP_RangeFinder_PulsedLightLRF</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__PulsedLightLRF_8h_source.html#l00041">AP_RangeFinder_PulsedLightLRF.h:41</a></div></div>
<div class="ttc" id="AP__Param_8h_html_a0f9acb038a5283b964b862aea8cc5051"><div class="ttname"><a href="AP__Param_8h.html#a0f9acb038a5283b964b862aea8cc5051">AP_GROUPEND</a></div><div class="ttdeci">#define AP_GROUPEND</div><div class="ttdef"><b>Definition:</b> <a href="AP__Param_8h_source.html#l00053">AP_Param.h:53</a></div></div>
<div class="ttc" id="structRangeFinder_1_1RangeFinder__State_html_a287c31bacab6a08966ca5d12b0c91281"><div class="ttname"><a href="structRangeFinder_1_1RangeFinder__State.html#a287c31bacab6a08966ca5d12b0c91281">RangeFinder::RangeFinder_State::pre_arm_distance_min</a></div><div class="ttdeci">uint16_t pre_arm_distance_min</div><div class="ttdef"><b>Definition:</b> <a href="RangeFinder_8h_source.html#l00078">RangeFinder.h:78</a></div></div>
<div class="ttc" id="classAP__RangeFinder__PX4__PWM_html"><div class="ttname"><a href="classAP__RangeFinder__PX4__PWM.html">AP_RangeFinder_PX4_PWM</a></div><div class="ttdef"><b>Definition:</b> <a href="AP__RangeFinder__PX4__PWM_8h_source.html#l00023">AP_RangeFinder_PX4_PWM.h:23</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 22 2016 15:25:22 for APM:Libraries by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
