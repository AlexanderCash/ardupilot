<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>APM:Plane: ArduPlane/px4_mixer.pde Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">APM:Plane
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_3410184b0f66c19589d6f580ccb2cc44.html">ArduPlane</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">px4_mixer.pde</div>  </div>
</div><!--header-->
<div class="contents">
<a href="px4__mixer_8pde.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// -*- tab-width: 4; Mode: C++; c-basic-offset: 4; indent-tabs-mode: nil -*-</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">  handle creation of PX4 mixer file, for failover to direct RC control</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">  on failure of FMU</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">  This will create APM/MIXER.MIX on the microSD card. The user may</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">  also create APM/CUSTOM.MIX, and if it exists that will be used</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">  instead. That allows the user to setup more complex failsafe mixes</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">  that include flaps, landing gear, ignition cut etc</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#if CONFIG_HAL_BOARD == HAL_BOARD_PX4</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;sys/types.h&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;unistd.h&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;drivers/drv_pwm_output.h&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;systemlib/mixer/mixer.h&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="comment">  create a mixer file given key fixed wing parameters</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="px4__mixer_8pde.html#aceeb68821a28b15ebc4e8317810a463d">   26</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="px4__mixer_8pde.html#aceeb68821a28b15ebc4e8317810a463d">create_mixer_file</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *filename)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;{</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    <span class="keywordtype">int</span> mix_fd = open(filename, O_WRONLY|O_CREAT|O_TRUNC, 0644);</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    <span class="keywordflow">if</span> (mix_fd == -1) {</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;        <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.console-&gt;printf(<span class="stringliteral">&quot;Unable to create mixer file\n&quot;</span>);</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    }</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    dprintf(mix_fd, <span class="stringliteral">&quot;Auto-generated mixer file for ArduPilot\n\n&quot;</span>);</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    <span class="comment">/*</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">      this is the equivalent of channel_output_mixer()</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="comment">     */</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    <span class="keyword">const</span> int8_t mixmul[5][2] = { { 0, 0 }, { 1, 1 }, { 1, -1 }, { -1, 1 }, { -1, -1 }};</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    <span class="comment">// these are the internal clipping limits. Use scale_max1 when</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    <span class="comment">// clipping to user specified min/max is wanted. Use scale_max2</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    <span class="comment">// when no clipping is wanted (simulated by setting a very large</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;    <span class="comment">// clipping value)</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> scale_max1 = 10000;</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> scale_max2 = 1000000;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;    <span class="comment">// range for mixers</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;    <span class="keyword">const</span> uint16_t mix_max = scale_max1 * <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a2937d30fb23995439eb2942872ae023f">mixing_gain</a>;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;    <span class="comment">// scaling factors used by PX4IO between pwm and internal values,</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;    <span class="comment">// as configured in setup_failsafe_mixing() below</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> pwm_min = 900;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> pwm_max = 2100;</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">float</span> pwm_scale = 2*scale_max1/(pwm_max - pwm_min);</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;8; <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        int32_t c1, c2, mix=0;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordtype">bool</span> rev = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3a">RC_Channel_aux::Aux_servo_function_t</a> <span class="keyword">function</span> = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#aaf15d56ff0c0d8f47ca0f97b155622f4">RC_Channel_aux::channel_function</a>(<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        <span class="keywordflow">if</span> (<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#ab0fcd136c54ad131dd3d40816264bcba">pitch</a>()-1 &amp;&amp; <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">vtail_output</a> &gt; <a class="code" href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a01155fd21de18bf78f8b3db1edf2f385">MIXING_DISABLED</a> &amp;&amp; <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">vtail_output</a> &lt;= <a class="code" href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a730fba38bb7858bb46a0f629a64e8dd0">MIXING_DNDN</a>) {</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;            <span class="comment">// first channel of VTAIL mix</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;            c1 = <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a4cecd4df7849415b9d4afc63c1dc9919">yaw</a>()-1;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;            c2 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;            rev = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;            mix = -mix_max*mixmul[<a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">vtail_output</a>][0];</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a4cecd4df7849415b9d4afc63c1dc9919">yaw</a>()-1 &amp;&amp; <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">vtail_output</a> &gt; <a class="code" href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a01155fd21de18bf78f8b3db1edf2f385">MIXING_DISABLED</a> &amp;&amp; <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">vtail_output</a> &lt;= <a class="code" href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a730fba38bb7858bb46a0f629a64e8dd0">MIXING_DNDN</a>) {</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;            <span class="comment">// second channel of VTAIL mix</span></div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;            c1 = <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#ab0fcd136c54ad131dd3d40816264bcba">pitch</a>()-1;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;            c2 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;            rev = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;            mix = mix_max*mixmul[<a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">vtail_output</a>][1];</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#af0d2e2d369f3574ed0a43bb80745572c">roll</a>()-1 &amp;&amp; <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a366ac275fbf243b206d53decb39f3bc3">elevon_output</a> &gt; <a class="code" href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a01155fd21de18bf78f8b3db1edf2f385">MIXING_DISABLED</a> &amp;&amp; </div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                   <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a366ac275fbf243b206d53decb39f3bc3">elevon_output</a> &lt;= <a class="code" href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a730fba38bb7858bb46a0f629a64e8dd0">MIXING_DNDN</a> &amp;&amp; <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">vtail_output</a> == 0) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;            <span class="comment">// first channel of ELEVON mix</span></div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;            c1 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;            c2 = <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#ab0fcd136c54ad131dd3d40816264bcba">pitch</a>()-1;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            rev = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;            mix = mix_max*mixmul[<a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a366ac275fbf243b206d53decb39f3bc3">elevon_output</a>][1];</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> == <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#ab0fcd136c54ad131dd3d40816264bcba">pitch</a>()-1 &amp;&amp; <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a366ac275fbf243b206d53decb39f3bc3">elevon_output</a> &gt; <a class="code" href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a01155fd21de18bf78f8b3db1edf2f385">MIXING_DISABLED</a> &amp;&amp; </div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                   <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a366ac275fbf243b206d53decb39f3bc3">elevon_output</a> &lt;= <a class="code" href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a730fba38bb7858bb46a0f629a64e8dd0">MIXING_DNDN</a> &amp;&amp; <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">vtail_output</a> == 0) {</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;            <span class="comment">// second channel of ELEVON mix</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;            c1 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;            c2 = <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#af0d2e2d369f3574ed0a43bb80745572c">roll</a>()-1;</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;            rev = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;            mix = mix_max*mixmul[<a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#a366ac275fbf243b206d53decb39f3bc3">elevon_output</a>][0];</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aad1dd8ac82fb3f7735270658609ee7c55">RC_Channel_aux::k_aileron</a> || </div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                   <span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa9c86105778be02aa2154050052cb3df7">RC_Channel_aux::k_flaperon1</a> || </div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                   <span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa45375075bae79e51a87ee0fcc6ceb014">RC_Channel_aux::k_flaperon2</a>) {</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;            <span class="comment">// a secondary aileron. We don&#39;t mix flap input in yet for flaperons</span></div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            c1 = <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#af0d2e2d369f3574ed0a43bb80745572c">roll</a>()-1;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aafd3dfebc05c1117207e5ac8324727151">RC_Channel_aux::k_elevator</a>) {</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            <span class="comment">// a secondary elevator</span></div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            c1 = <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#ab0fcd136c54ad131dd3d40816264bcba">pitch</a>()-1;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa8386b6ecd45ddad5139beaf732b41f9d">RC_Channel_aux::k_rudder</a> || </div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                   <span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa0a310d26b1cc124cac55e31d99bf576d">RC_Channel_aux::k_steering</a>) {</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;            <span class="comment">// a secondary rudder or wheel</span></div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            c1 = <a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a4cecd4df7849415b9d4afc63c1dc9919">yaw</a>()-1;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#abdf1a239d1f81628466e6fc3a11fc737">flapin_channel</a> &gt; 0 &amp;&amp;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;                   (<span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa7c9a05df54b7de8fb01e8ea4acd895ff">RC_Channel_aux::k_flap</a> ||</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                    <span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aab4b02d00d7f6b9a4dea4c216b9f1e608">RC_Channel_aux::k_flap_auto</a>)) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;            <span class="comment">// a flap output channel, and we have a manual flap input channel</span></div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            c1 = <a class="code" href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a>.<a class="code" href="classParameters.html#abdf1a239d1f81628466e6fc3a11fc737">flapin_channel</a>-1;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; 4 ||</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;                   <span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa7994290ddb33ed8186b4c4ae60e449b4">RC_Channel_aux::k_elevator_with_input</a> ||</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                   <span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa61c4c760ac98671a7e5a37f8c5ef96f1">RC_Channel_aux::k_aileron_with_input</a> ||</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                   <span class="keyword">function</span> == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa9a02ef5cdb45808931dda003ed2edf2f">RC_Channel_aux::k_manual</a>) {</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;            <span class="comment">// a pass-thru channel</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            c1 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;            <span class="comment">// a empty output</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;            dprintf(mix_fd, <span class="stringliteral">&quot;Z:\n\n&quot;</span>);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;        }</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;        <span class="keywordflow">if</span> (mix == 0) {</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;            <span class="comment">// pass thru channel, possibly with reversal. We also</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;            <span class="comment">// adjust the gain based on the range of input and output</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;            <span class="comment">// channels and adjust for trims</span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            <span class="keyword">const</span> <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html">RC_Channel</a> *chan1 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a9c60b41a2854338f60e26fdf95b4b044">RC_Channel::rc_channel</a>(<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;            <span class="keyword">const</span> <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html">RC_Channel</a> *chan2 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a9c60b41a2854338f60e26fdf95b4b044">RC_Channel::rc_channel</a>(c1);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;            int16_t chan1_trim = (<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>==<a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a869e1086eb9bdf12f46595e49c8f2915">throttle</a>()-1?1500:chan1-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#aa37272aac0185378d76e4013838df1eb">radio_trim</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;            int16_t chan2_trim = (c1==<a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a869e1086eb9bdf12f46595e49c8f2915">throttle</a>()-1?1500:chan2-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#aa37272aac0185378d76e4013838df1eb">radio_trim</a>);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="comment">// if the input and output channels are the same then we</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            <span class="comment">// apply clipping. This allows for direct pass-thru</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            int32_t limit = (c1==<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>?scale_max2:scale_max1);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            int32_t in_scale_low;</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            <span class="keywordflow">if</span> (chan2_trim &lt;= chan2-&gt;radio_min) {</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                in_scale_low = scale_max1;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                in_scale_low = scale_max1*(chan2_trim - pwm_min)/(<span class="keywordtype">float</span>)(chan2_trim - chan2-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a9d03a27b745c07262320ff3328a56ff2">radio_min</a>);</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;            }</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;            int32_t in_scale_high;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;            <span class="keywordflow">if</span> (chan2-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a99c6745622d1a100408eb43d5ac54b49">radio_max</a> &lt;= chan2_trim) {</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                in_scale_high = scale_max1;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                in_scale_high = scale_max1*(pwm_max - chan2_trim)/(<span class="keywordtype">float</span>)(chan2-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a99c6745622d1a100408eb43d5ac54b49">radio_max</a> - chan2_trim);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;            }</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;            <span class="keywordflow">if</span> (chan1-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a34a93842b1cf847373104b682fa28cd5">get_reverse</a>() != chan2-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a34a93842b1cf847373104b682fa28cd5">get_reverse</a>()) {</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                in_scale_low = -in_scale_low;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                in_scale_high = -in_scale_high;</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;            }</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;            dprintf(mix_fd, <span class="stringliteral">&quot;M: 1\n&quot;</span>);</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;            dprintf(mix_fd, <span class="stringliteral">&quot;O: %d %d %d %d %d\n&quot;</span>,</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                    (<span class="keywordtype">int</span>)(pwm_scale*(chan1_trim - chan1-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a9d03a27b745c07262320ff3328a56ff2">radio_min</a>)),</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                    (<span class="keywordtype">int</span>)(pwm_scale*(chan1-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a99c6745622d1a100408eb43d5ac54b49">radio_max</a> - chan1_trim)),</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                    (<span class="keywordtype">int</span>)(pwm_scale*(chan1_trim - 1500)),</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                    (<span class="keywordtype">int</span>)-scale_max2, (<span class="keywordtype">int</span>)scale_max2);</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;            dprintf(mix_fd, <span class="stringliteral">&quot;S: 0 %u %d %d %d %d %d\n\n&quot;</span>, c1,</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    in_scale_low,</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                    in_scale_high,</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                    0,</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    -limit, limit);</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;            <span class="keyword">const</span> <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html">RC_Channel</a> *chan1 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a9c60b41a2854338f60e26fdf95b4b044">RC_Channel::rc_channel</a>(c1);</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;            <span class="keyword">const</span> <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html">RC_Channel</a> *chan2 = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a9c60b41a2854338f60e26fdf95b4b044">RC_Channel::rc_channel</a>(c2);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;            int16_t chan1_trim = (c1==<a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a869e1086eb9bdf12f46595e49c8f2915">throttle</a>()-1?1500:chan1-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#aa37272aac0185378d76e4013838df1eb">radio_trim</a>);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;            int16_t chan2_trim = (c2==<a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a869e1086eb9bdf12f46595e49c8f2915">throttle</a>()-1?1500:chan2-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#aa37272aac0185378d76e4013838df1eb">radio_trim</a>);</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;            <span class="comment">// mix of two input channels to give an output channel. To</span></div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;            <span class="comment">// make the mixer match the behaviour of APM we need to</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;            <span class="comment">// scale and offset the input channels to undo the affects</span></div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;            <span class="comment">// of the PX4IO input processing</span></div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;            dprintf(mix_fd, <span class="stringliteral">&quot;M: 2\n&quot;</span>);</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;            dprintf(mix_fd, <span class="stringliteral">&quot;O: %d %d 0 %d %d\n&quot;</span>, mix, mix, (<span class="keywordtype">int</span>)-scale_max1, (<span class="keywordtype">int</span>)scale_max1);</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;            int32_t in_scale_low = pwm_scale*(chan1_trim - pwm_min);</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;            int32_t in_scale_high = pwm_scale*(pwm_max - chan1_trim);</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;            int32_t offset = pwm_scale*(chan1_trim - 1500);</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;            dprintf(mix_fd, <span class="stringliteral">&quot;S: 0 %u %d %d %d %d %d\n&quot;</span>, </div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                    c1, in_scale_low, in_scale_high, offset,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                    (<span class="keywordtype">int</span>)-scale_max2, (<span class="keywordtype">int</span>)scale_max2);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;            in_scale_low = pwm_scale*(chan2_trim - pwm_min);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;            in_scale_high = pwm_scale*(pwm_max - chan2_trim);</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            offset = pwm_scale*(chan2_trim - 1500);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;            <span class="keywordflow">if</span> (rev) {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                dprintf(mix_fd, <span class="stringliteral">&quot;S: 0 %u %d %d %d %d %d\n\n&quot;</span>, </div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                        c2, in_scale_low, in_scale_high, offset,</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                        (<span class="keywordtype">int</span>)-scale_max2, (<span class="keywordtype">int</span>)scale_max2);</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                dprintf(mix_fd, <span class="stringliteral">&quot;S: 0 %u %d %d %d %d %d\n\n&quot;</span>, </div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                        c2, -in_scale_low, -in_scale_high, -offset,</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                        (<span class="keywordtype">int</span>)-scale_max2, (<span class="keywordtype">int</span>)scale_max2);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            }</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;        }</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    }    </div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    close(mix_fd);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;}</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;<span class="comment">  setup mixer on PX4 so that if FMU dies the pilot gets manual control</span></div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="comment"> */</span></div>
<div class="line"><a name="l00188"></a><span class="lineno"><a class="line" href="px4__mixer_8pde.html#ad44f9728662fe9acdd3d149005816a16">  188</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="px4__mixer_8pde.html#ad44f9728662fe9acdd3d149005816a16">setup_failsafe_mixing</a>(<span class="keywordtype">void</span>)</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;{</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    <span class="comment">// we create MIXER.MIX regardless of whether we will be using it,</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    <span class="comment">// as it gives a template for the user to modify to create their</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="comment">// own CUSTOM.MIX file</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *mixer_filename = <span class="stringliteral">&quot;/fs/microsd/APM/MIXER.MIX&quot;</span>;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *custom_mixer_filename = <span class="stringliteral">&quot;/fs/microsd/APM/CUSTOM.MIX&quot;</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    <span class="keywordtype">bool</span> ret = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;    <span class="keywordtype">char</span> *buf = NULL;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    <span class="keyword">const</span> uint16_t buf_size = 2048;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    <span class="keywordflow">if</span> (!<a class="code" href="px4__mixer_8pde.html#aceeb68821a28b15ebc4e8317810a463d">create_mixer_file</a>(mixer_filename)) {</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    }</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keyword">struct </span>stat st;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span> *filename;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">if</span> (stat(custom_mixer_filename, &amp;st) == 0) {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;        filename = custom_mixer_filename;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;        filename = mixer_filename;</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;    <span class="keyword">enum</span> <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classAP__HAL_1_1Util.html#a5a1bd80d5db6547fbb3dff25f88de500">AP_HAL::Util::safety_state</a> old_state = <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.util-&gt;safety_switch_state();</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;    <span class="keyword">struct </span>pwm_output_values pwm_values = {.values = {0}, .channel_count = 8};</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">int</span> px4io_fd = open(<span class="stringliteral">&quot;/dev/px4io&quot;</span>, 0);</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">if</span> (px4io_fd == -1) {</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        <span class="comment">// px4io isn&#39;t started, no point in setting up a mixer</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;    }</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    buf = (<span class="keywordtype">char</span> *)malloc(buf_size);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">if</span> (buf == NULL) {</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    }</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span> (load_mixer_file(filename, &amp;buf[0], buf_size) != 0) {</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.console-&gt;printf(<span class="stringliteral">&quot;Unable to load %s\n&quot;</span>, filename);</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    }</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;    <span class="keywordflow">if</span> (old_state == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classAP__HAL_1_1Util.html#a5a1bd80d5db6547fbb3dff25f88de500ac6a72b9c4735fd0a67e62f0234a4db5c">AP_HAL::Util::SAFETY_ARMED</a>) {</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        <span class="comment">// make sure the throttle has a non-zero failsafe value before we</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        <span class="comment">// disable safety. This prevents sending zero PWM during switch over</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;        <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.rcout-&gt;set_safety_pwm(1UL&lt;&lt;(<a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a869e1086eb9bdf12f46595e49c8f2915">throttle</a>()-1), <a class="code" href="ArduPlane_8pde.html#af2abeb19c76520d9545edf9f52343a68">channel_throttle</a>-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a9d03a27b745c07262320ff3328a56ff2">radio_min</a>);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;    }</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="comment">// we need to force safety on to allow us to load a mixer</span></div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.rcout-&gt;force_safety_on();</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;    <span class="comment">/* reset any existing mixer in px4io. This shouldn&#39;t be needed,</span></div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;<span class="comment">     * but is good practice */</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;    <span class="keywordflow">if</span> (ioctl(px4io_fd, MIXERIOCRESET, 0) != 0) {</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.console-&gt;printf(<span class="stringliteral">&quot;Unable to reset mixer\n&quot;</span>);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        <span class="keywordflow">goto</span> failed;</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">/* pass the buffer to the device */</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;    <span class="keywordflow">if</span> (ioctl(px4io_fd, MIXERIOCLOADBUF, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)buf) != 0) {</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.console-&gt;printf(<span class="stringliteral">&quot;Unable to send mixer to IO\n&quot;</span>);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">goto</span> failed;        </div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;    }</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;    <span class="comment">// setup RC config for each channel based on user specified</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;    <span class="comment">// mix/max/trim. We only do the first 8 channels due to </span></div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="comment">// a RC config limitation in px4io.c limiting to PX4IO_RC_MAPPED_CONTROL_CHANNELS</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>=0; <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>&lt;8; <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;        <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html">RC_Channel</a> *<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/examples_2AnalogIn_2AnalogIn_8pde.html#a6d460200846f188be4b33e39cd42a63a">ch</a> = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#a9c60b41a2854338f60e26fdf95b4b044">RC_Channel::rc_channel</a>(<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        <span class="keywordflow">if</span> (ch == NULL) {</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            <span class="keywordflow">continue</span>;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        <span class="keyword">struct </span>pwm_output_rc_config config;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;        <span class="comment">/*</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;<span class="comment">          we use a min/max of 900/2100 to allow for pass-thru of</span></div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;<span class="comment">          larger values than the RC min/max range. This mimics the APM</span></div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;<span class="comment">          behaviour of pass-thru in manual, which allows for dual-rate</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;<span class="comment">          transmitter setups in manual mode to go beyond the ranges</span></div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;<span class="comment">          used in stabilised modes</span></div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;<span class="comment">         */</span></div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;        config.channel = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;        config.rc_min = 900;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;        config.rc_max = 2100;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a>.<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRCMapper.html#a869e1086eb9bdf12f46595e49c8f2915">throttle</a>()-1 == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>) {</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;            <span class="comment">// throttle uses a trim of 1500, so we don&#39;t get division</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;            <span class="comment">// by small numbers near RC3_MIN</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;            config.rc_trim = 1500;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;            config.rc_trim = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/AP__Math_8cpp.html#ac5d9502aca91c97f523fd9b35590215f">constrain_int16</a>(ch-&gt;<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classRC__Channel.html#aa37272aac0185378d76e4013838df1eb">radio_trim</a>, config.rc_min, config.rc_max);</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;        }</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;        config.rc_dz = 0; <span class="comment">// zero for the purposes of manual takeover</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        config.rc_assignment = <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;        <span class="comment">// we set reverse as false, as users of ArduPilot will have</span></div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="comment">// input reversed on transmitter, so from the point of view of</span></div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <span class="comment">// the mixer the input is never reversed. The one exception is</span></div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;        <span class="comment">// the 2nd channel, which is reversed inside the PX4IO code,</span></div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;        <span class="comment">// so needs to be unreversed here to give sane behaviour.</span></div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;        <span class="keywordflow">if</span> (<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> == 1) {</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;            config.rc_reverse = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;            config.rc_reverse = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;        }</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;        <span class="keywordflow">if</span> (ioctl(px4io_fd, PWM_SERVO_SET_RC_CONFIG, (<span class="keywordtype">unsigned</span> <span class="keywordtype">long</span>)&amp;config) != 0) {</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;            <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.console-&gt;printf(<span class="stringliteral">&quot;SET_RC_CONFIG failed\n&quot;</span>);</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;        }</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;    }</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pwm_values.channel_count; <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;        pwm_values.values[<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 900;</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;    }</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    ioctl(px4io_fd, PWM_SERVO_SET_MIN_PWM, (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)&amp;pwm_values);</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;    <span class="keywordflow">for</span> (uint8_t <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> = 0; <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a> &lt; pwm_values.channel_count; <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>++) {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;        pwm_values.values[<a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a>] = 2100;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;    }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;    ioctl(px4io_fd, PWM_SERVO_SET_MAX_PWM, (<span class="keywordtype">long</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span>)&amp;pwm_values);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;    ioctl(px4io_fd, PWM_SERVO_SET_OVERRIDE_OK, 0);</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;    <span class="comment">// setup for immediate manual control if FMU dies</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;    ioctl(px4io_fd, PWM_SERVO_SET_OVERRIDE_IMMEDIATE, 1);</div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    ret = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;failed:</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;    <span class="keywordflow">if</span> (buf != NULL) {</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        free(buf);</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;    }</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;    <span class="keywordflow">if</span> (px4io_fd != -1) {</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        close(px4io_fd);</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;    <span class="comment">// restore safety state if it was previously armed</span></div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">if</span> (old_state == <a class="codeRef" doxygen="/home/ac1054/Documents/JSBSim/ardupilot/docs/tags/libraries:../libraries/" href="../libraries/classAP__HAL_1_1Util.html#a5a1bd80d5db6547fbb3dff25f88de500ac6a72b9c4735fd0a67e62f0234a4db5c">AP_HAL::Util::SAFETY_ARMED</a>) {</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;        <a class="code" href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a>.rcout-&gt;force_safety_off();</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;    }</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;    <span class="keywordflow">return</span> ret;</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;}</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="preprocessor">#endif // CONFIG_HAL_BOARD</span></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa9c86105778be02aa2154050052cb3df7"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa9c86105778be02aa2154050052cb3df7">RC_Channel_aux::k_flaperon1</a></div></div>
<div class="ttc" id="GCS__Console_2examples_2Console_2Console_8pde_html_acb559820d9ca11295b4500f179ef6392"><div class="ttname"><a href="../libraries/GCS__Console_2examples_2Console_2Console_8pde.html#acb559820d9ca11295b4500f179ef6392">i</a></div><div class="ttdeci">int i</div></div>
<div class="ttc" id="classRCMapper_html_a869e1086eb9bdf12f46595e49c8f2915"><div class="ttname"><a href="../libraries/classRCMapper.html#a869e1086eb9bdf12f46595e49c8f2915">RCMapper::throttle</a></div><div class="ttdeci">uint8_t throttle() const </div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aad1dd8ac82fb3f7735270658609ee7c55"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aad1dd8ac82fb3f7735270658609ee7c55">RC_Channel_aux::k_aileron</a></div></div>
<div class="ttc" id="classRC__Channel_html_a9c60b41a2854338f60e26fdf95b4b044"><div class="ttname"><a href="../libraries/classRC__Channel.html#a9c60b41a2854338f60e26fdf95b4b044">RC_Channel::rc_channel</a></div><div class="ttdeci">static RC_Channel * rc_channel(uint8_t i)</div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa0a310d26b1cc124cac55e31d99bf576d"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa0a310d26b1cc124cac55e31d99bf576d">RC_Channel_aux::k_steering</a></div></div>
<div class="ttc" id="classRC__Channel_html_a9d03a27b745c07262320ff3328a56ff2"><div class="ttname"><a href="../libraries/classRC__Channel.html#a9d03a27b745c07262320ff3328a56ff2">RC_Channel::radio_min</a></div><div class="ttdeci">AP_Int16 radio_min</div></div>
<div class="ttc" id="classRC__Channel__aux_html_aaf15d56ff0c0d8f47ca0f97b155622f4"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#aaf15d56ff0c0d8f47ca0f97b155622f4">RC_Channel_aux::channel_function</a></div><div class="ttdeci">static Aux_servo_function_t channel_function(uint8_t channel)</div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa45375075bae79e51a87ee0fcc6ceb014"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa45375075bae79e51a87ee0fcc6ceb014">RC_Channel_aux::k_flaperon2</a></div></div>
<div class="ttc" id="ArduPlane_8pde_html_af2abeb19c76520d9545edf9f52343a68"><div class="ttname"><a href="ArduPlane_8pde.html#af2abeb19c76520d9545edf9f52343a68">channel_throttle</a></div><div class="ttdeci">static RC_Channel * channel_throttle</div><div class="ttdef"><b>Definition:</b> <a href="ArduPlane_8pde_source.html#l00143">ArduPlane.pde:143</a></div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa7c9a05df54b7de8fb01e8ea4acd895ff"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa7c9a05df54b7de8fb01e8ea4acd895ff">RC_Channel_aux::k_flap</a></div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa8386b6ecd45ddad5139beaf732b41f9d"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa8386b6ecd45ddad5139beaf732b41f9d">RC_Channel_aux::k_rudder</a></div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aafd3dfebc05c1117207e5ac8324727151"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aafd3dfebc05c1117207e5ac8324727151">RC_Channel_aux::k_elevator</a></div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa9a02ef5cdb45808931dda003ed2edf2f"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa9a02ef5cdb45808931dda003ed2edf2f">RC_Channel_aux::k_manual</a></div></div>
<div class="ttc" id="classRCMapper_html_a4cecd4df7849415b9d4afc63c1dc9919"><div class="ttname"><a href="../libraries/classRCMapper.html#a4cecd4df7849415b9d4afc63c1dc9919">RCMapper::yaw</a></div><div class="ttdeci">uint8_t yaw() const </div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aab4b02d00d7f6b9a4dea4c216b9f1e608"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aab4b02d00d7f6b9a4dea4c216b9f1e608">RC_Channel_aux::k_flap_auto</a></div></div>
<div class="ttc" id="classParameters_html_a60aeb16ecbbb151ca5caba18b4e811a6"><div class="ttname"><a href="classParameters.html#a60aeb16ecbbb151ca5caba18b4e811a6">Parameters::vtail_output</a></div><div class="ttdeci">AP_Int8 vtail_output</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00431">Parameters.h:431</a></div></div>
<div class="ttc" id="classRC__Channel_html_a34a93842b1cf847373104b682fa28cd5"><div class="ttname"><a href="../libraries/classRC__Channel.html#a34a93842b1cf847373104b682fa28cd5">RC_Channel::get_reverse</a></div><div class="ttdeci">bool get_reverse(void) const </div></div>
<div class="ttc" id="classRCMapper_html_af0d2e2d369f3574ed0a43bb80745572c"><div class="ttname"><a href="../libraries/classRCMapper.html#af0d2e2d369f3574ed0a43bb80745572c">RCMapper::roll</a></div><div class="ttdeci">uint8_t roll() const </div></div>
<div class="ttc" id="defines_8h_html_a9396d845911e96d0de24ab22ebeca5f0a01155fd21de18bf78f8b3db1edf2f385"><div class="ttname"><a href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a01155fd21de18bf78f8b3db1edf2f385">MIXING_DISABLED</a></div><div class="ttdef"><b>Definition:</b> <a href="defines_8h_source.html#l00075">defines.h:75</a></div></div>
<div class="ttc" id="ArduPlane_8pde_html_aaf9f187190dde6bec231013495948955"><div class="ttname"><a href="ArduPlane_8pde.html#aaf9f187190dde6bec231013495948955">g</a></div><div class="ttdeci">static Parameters g</div><div class="ttdef"><b>Definition:</b> <a href="ArduPlane_8pde_source.html#l00129">ArduPlane.pde:129</a></div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa7994290ddb33ed8186b4c4ae60e449b4"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa7994290ddb33ed8186b4c4ae60e449b4">RC_Channel_aux::k_elevator_with_input</a></div></div>
<div class="ttc" id="defines_8h_html_a9396d845911e96d0de24ab22ebeca5f0a730fba38bb7858bb46a0f629a64e8dd0"><div class="ttname"><a href="defines_8h.html#a9396d845911e96d0de24ab22ebeca5f0a730fba38bb7858bb46a0f629a64e8dd0">MIXING_DNDN</a></div><div class="ttdef"><b>Definition:</b> <a href="defines_8h_source.html#l00079">defines.h:79</a></div></div>
<div class="ttc" id="classParameters_html_a366ac275fbf243b206d53decb39f3bc3"><div class="ttname"><a href="classParameters.html#a366ac275fbf243b206d53decb39f3bc3">Parameters::elevon_output</a></div><div class="ttdeci">AP_Int8 elevon_output</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00432">Parameters.h:432</a></div></div>
<div class="ttc" id="ArduPlane_8pde_html_ae08c3ca4ba26b63cda0bb3e3c6c02785"><div class="ttname"><a href="ArduPlane_8pde.html#ae08c3ca4ba26b63cda0bb3e3c6c02785">hal</a></div><div class="ttdeci">const AP_HAL::HAL &amp; hal</div><div class="ttdef"><b>Definition:</b> <a href="ArduPlane_8pde_source.html#l00115">ArduPlane.pde:115</a></div></div>
<div class="ttc" id="classRC__Channel_html"><div class="ttname"><a href="../libraries/classRC__Channel.html">RC_Channel</a></div></div>
<div class="ttc" id="classParameters_html_a2937d30fb23995439eb2942872ae023f"><div class="ttname"><a href="classParameters.html#a2937d30fb23995439eb2942872ae023f">Parameters::mixing_gain</a></div><div class="ttdeci">AP_Float mixing_gain</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00434">Parameters.h:434</a></div></div>
<div class="ttc" id="examples_2AnalogIn_2AnalogIn_8pde_html_a6d460200846f188be4b33e39cd42a63a"><div class="ttname"><a href="../libraries/examples_2AnalogIn_2AnalogIn_8pde.html#a6d460200846f188be4b33e39cd42a63a">ch</a></div><div class="ttdeci">AP_HAL::AnalogSource * ch</div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3aa61c4c760ac98671a7e5a37f8c5ef96f1"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3aa61c4c760ac98671a7e5a37f8c5ef96f1">RC_Channel_aux::k_aileron_with_input</a></div></div>
<div class="ttc" id="classRC__Channel_html_a99c6745622d1a100408eb43d5ac54b49"><div class="ttname"><a href="../libraries/classRC__Channel.html#a99c6745622d1a100408eb43d5ac54b49">RC_Channel::radio_max</a></div><div class="ttdeci">AP_Int16 radio_max</div></div>
<div class="ttc" id="classRC__Channel_html_aa37272aac0185378d76e4013838df1eb"><div class="ttname"><a href="../libraries/classRC__Channel.html#aa37272aac0185378d76e4013838df1eb">RC_Channel::radio_trim</a></div><div class="ttdeci">AP_Int16 radio_trim</div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a5a1bd80d5db6547fbb3dff25f88de500"><div class="ttname"><a href="../libraries/classAP__HAL_1_1Util.html#a5a1bd80d5db6547fbb3dff25f88de500">AP_HAL::Util::safety_state</a></div><div class="ttdeci">safety_state</div></div>
<div class="ttc" id="classParameters_html_abdf1a239d1f81628466e6fc3a11fc737"><div class="ttname"><a href="classParameters.html#abdf1a239d1f81628466e6fc3a11fc737">Parameters::flapin_channel</a></div><div class="ttdeci">AP_Int8 flapin_channel</div><div class="ttdef"><b>Definition:</b> <a href="Parameters_8h_source.html#l00471">Parameters.h:471</a></div></div>
<div class="ttc" id="ArduPlane_8pde_html_a047251d5e1c99566a6fc9639752c3d29"><div class="ttname"><a href="ArduPlane_8pde.html#a047251d5e1c99566a6fc9639752c3d29">rcmap</a></div><div class="ttdeci">static RCMapper rcmap</div><div class="ttdef"><b>Definition:</b> <a href="ArduPlane_8pde_source.html#l00135">ArduPlane.pde:135</a></div></div>
<div class="ttc" id="px4__mixer_8pde_html_ad44f9728662fe9acdd3d149005816a16"><div class="ttname"><a href="px4__mixer_8pde.html#ad44f9728662fe9acdd3d149005816a16">setup_failsafe_mixing</a></div><div class="ttdeci">static bool setup_failsafe_mixing(void)</div><div class="ttdef"><b>Definition:</b> <a href="px4__mixer_8pde_source.html#l00188">px4_mixer.pde:188</a></div></div>
<div class="ttc" id="classAP__HAL_1_1Util_html_a5a1bd80d5db6547fbb3dff25f88de500ac6a72b9c4735fd0a67e62f0234a4db5c"><div class="ttname"><a href="../libraries/classAP__HAL_1_1Util.html#a5a1bd80d5db6547fbb3dff25f88de500ac6a72b9c4735fd0a67e62f0234a4db5c">AP_HAL::Util::SAFETY_ARMED</a></div></div>
<div class="ttc" id="classRC__Channel__aux_html_a3d3f7f832c8e39d2d8b6c337214d3b3a"><div class="ttname"><a href="../libraries/classRC__Channel__aux.html#a3d3f7f832c8e39d2d8b6c337214d3b3a">RC_Channel_aux::Aux_servo_function_t</a></div><div class="ttdeci">Aux_servo_function_t</div></div>
<div class="ttc" id="px4__mixer_8pde_html_aceeb68821a28b15ebc4e8317810a463d"><div class="ttname"><a href="px4__mixer_8pde.html#aceeb68821a28b15ebc4e8317810a463d">create_mixer_file</a></div><div class="ttdeci">static bool create_mixer_file(const char *filename)</div><div class="ttdef"><b>Definition:</b> <a href="px4__mixer_8pde_source.html#l00026">px4_mixer.pde:26</a></div></div>
<div class="ttc" id="classRCMapper_html_ab0fcd136c54ad131dd3d40816264bcba"><div class="ttname"><a href="../libraries/classRCMapper.html#ab0fcd136c54ad131dd3d40816264bcba">RCMapper::pitch</a></div><div class="ttdeci">uint8_t pitch() const </div></div>
<div class="ttc" id="AP__Math_8cpp_html_ac5d9502aca91c97f523fd9b35590215f"><div class="ttname"><a href="../libraries/AP__Math_8cpp.html#ac5d9502aca91c97f523fd9b35590215f">constrain_int16</a></div><div class="ttdeci">int16_t constrain_int16(int16_t amt, int16_t low, int16_t high)</div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Feb 22 2016 15:33:55 for APM:Plane by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
